
language: c
sudo: false

env:
    - LUA="lua=5.1"
    - LUA="lua=5.2"
    - LUA="lua=5.3"
    - LUA="luajit=2.0"
    - LUA="luajit=2.1"

install:
    - luarocks install moonscript
    - luarocks install lua-toml
    - luarocks install argparse
    - luarocks install luafilesystem
    - luarocks install busted

before_install:
    - pip install hererocks
    - hererocks lua_install -r^ --$LUA
    - export PATH=$PATH:$PWD/lua_install/bin

script:
    - busted --verbose

